{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/karthik/Desktop/linkedin-clone/frontend/src/components/jobview.component.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\nimport StarRatings from 'react-star-ratings';\nimport Button from 'react-bootstrap/Button';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport Fuse from 'fuse.js';\n\nclass JobView extends Component {\n  constructor(props) {\n    super(props);\n    this.componentWillMount = this.componentWillMount.bind(this);\n    this.renderJobs = this.renderJobs.bind(this);\n    this.getRecruiter = this.getRecruiter.bind(this);\n    this.onClickApp = this.onClickApp.bind(this);\n    this.onClickRec = this.onClickRec.bind(this);\n    this.onChangeFilterDuration = this.onChangeFilterDuration.bind(this);\n    this.onChangeFilterSalaryMax = this.onChangeFilterSalaryMax.bind(this);\n    this.onChangeFilterType = this.onChangeFilterType.bind(this);\n    this.onChangeFilterSalaryMin = this.onChangeFilterSalaryMin.bind(this);\n    this.onFilter = this.onFilter.bind(this);\n    this.onFuzzy = this.onFuzzy.bind(this);\n    this.onChangeSearchTitle = this.onChangeSearchTitle.bind(this);\n    this.state = {\n      jobs: [],\n      recruiters: [],\n      loading: true,\n      filter_salary_max: 1000000,\n      filter_salary_min: 0,\n      filter_type: '',\n      filter_duration: 0,\n      filtered_job: [],\n      no_results: 0,\n      applications: [],\n      id: '',\n      search_title: '',\n      occurences: [],\n      sortby: '',\n      sortin: 'asc'\n    };\n  }\n\n  componentWillMount() {\n    const User = {\n      token: localStorage.getItem(\"token\"),\n      type: localStorage.getItem(\"type\")\n    };\n    const TokenVerify = {\n      token: localStorage.getItem(\"token\")\n    };\n\n    if (!User.token) {\n      alert('Not permitted');\n      this.props.history.push('/');\n    }\n\n    if (User.type === 'Applicant') {\n      // List all jobs\n      axios.post(\"http://localhost:5000/jobs/viewall\", TokenVerify).then(info => {\n        this.setState({\n          jobs: info.data.jobs\n        });\n        this.setState({\n          recruiters: info.data.recruiters\n        });\n        axios.post(\"http://localhost:5000/users/decode\", TokenVerify).then(result => {\n          this.setState({\n            id: result.data.id\n          });\n\n          if (!result.data.id) {\n            alert('Not permitted');\n            this.props.history.push('/');\n          }\n\n          const url = \"http://localhost:5000/applicants/applications/\" + result.data.id;\n          axios.post(url, TokenVerify).then(applications => {\n            if (applications.data == 1) {\n              alert('Not permitted');\n              this.props.history.push('/login');\n            }\n\n            this.setState({\n              applications: applications.data\n            });\n            var jobids = [];\n\n            for (var i = 0; i < info.data.jobs.length; i++) {\n              jobids.push(info.data.jobs[i]._id);\n            }\n\n            const job = {\n              id: jobids\n            };\n            axios.post(\"http://localhost:5000/jobs/applications/countall\", job).then(applications => {\n              var job_occurences = [];\n\n              for (var i = 0; i < applications.data.length; i++) {\n                job_occurences.push(applications.data[i].job);\n              }\n\n              this.setState({\n                occurences: job_occurences\n              });\n            });\n            this.setState({\n              loading: false\n            });\n          }).catch(error => console.log(error));\n        }).catch(error => console.log(error));\n      }).catch(error => console.log(error));\n    }\n\n    if (User.type === 'Recruiter') {\n      axios.post(\"http://localhost:5000/users/decode\", TokenVerify).then(res => {\n        if (!res.data.id) {\n          alert('Not permitted');\n          this.props.history.push('/');\n        } else {\n          const url = \"http://localhost:5000/recruiters/\" + res.data.id + \"/jobs\";\n          axios.post(url, TokenVerify).then(jobs => {\n            this.setState({\n              jobs: jobs.data\n            });\n            this.setState({\n              loading: false\n            });\n          }).catch(error => console.log(error));\n        }\n      });\n    }\n  }\n\n  async onFuzzy() {\n    var res = [];\n\n    if (this.state.filtered_job.length == 0) {\n      const fuse = new Fuse(this.state.jobs, {\n        keys: ['title']\n      });\n      res = fuse.search(this.state.search_title);\n    } else {\n      const fuse = new Fuse(this.state.filtered_job, {\n        keys: ['title']\n      });\n      res = fuse.search(this.state.search_title);\n    }\n\n    var ans = [];\n\n    for (var i = 0; i < res.length; i++) {\n      ans.push(res[i].item);\n    }\n\n    await this.setState({\n      filtered_job: ans\n    });\n  }\n\n  onChangeSearchTitle(e) {\n    this.setState({\n      search_title: e.target.value\n    });\n  }\n\n  onChangeFilterSalaryMax(e) {\n    this.setState({\n      filter_salary_max: e.target.value\n    });\n  }\n\n  onChangeFilterSalaryMin(e) {\n    this.setState({\n      filter_salary_min: e.target.value\n    });\n  }\n\n  onChangeFilterType(e) {\n    this.setState({\n      filter_type: e\n    });\n  }\n\n  onChangeFilterDuration(e) {\n    this.setState({\n      filter_duration: e\n    });\n  }\n\n  renderSkills(skill) {\n    const skills = skill.map(d1 => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", d1, \" \"]\n    }, d1, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }, this));\n    return skills;\n  }\n\n  getRecruiter(id, attr) {\n    const len = this.state.recruiters.length;\n\n    if (len != 0) {\n      for (var i = 0; i < len; i++) {\n        if (id === this.state.recruiters[i].usrid) {\n          return this.state.recruiters[i].phone;\n        }\n      }\n    }\n  }\n\n  onClickApp(d) {\n    localStorage.setItem('jobid', d._id);\n    this.props.history.push({\n      pathname: '/apply',\n      state: d._id\n    });\n  }\n\n  onClickRec(d) {\n    localStorage.setItem('jobid', d._id);\n    this.props.history.push({\n      pathname: '/appviewjob',\n      state: d._id\n    });\n  }\n\n  onClickDelete(d) {\n    const TokenVerify = {\n      token: localStorage.getItem(\"token\")\n    };\n    const url = \"http://localhost:5000/jobs/delete/\" + d._id;\n    axios.post(url, TokenVerify).then(result => {\n      if (result.data == 1) {\n        alert('Not Permitted!');\n        this.props.history.push('/login');\n      } else {\n        alert('Successfully Deleted!');\n        window.location.reload(false);\n      }\n    });\n  }\n\n  onClickUpdate(d) {\n    this.props.history.push({\n      pathname: '/updatejob',\n      state: d._id\n    });\n  }\n\n  changeRating(newRating, name) {\n    const url = \"http://localhost:5000/jobs/updateratings/\" + name;\n    const requirements = {\n      token: localStorage.getItem('token'),\n      rating: newRating\n    };\n    axios.post(url, requirements).then(result => {\n      if (result.data == 1) {\n        alert('Not Authorized!');\n        this.props.history.push('/login');\n      } else if (result.data == 2) {\n        alert('Already Rated');\n      } else {\n        alert('Successful!');\n        window.location.reload(false);\n      }\n    });\n  }\n\n  alreadyApplied(jobid) {\n    const len = this.state.applications.length;\n\n    if (len != 0) {\n      for (var i = 0; i < len; i++) {\n        if (jobid === this.state.applications[i].job) {\n          return 1;\n        }\n      }\n    }\n\n    return 0;\n  }\n\n  renderApply(d) {\n    if (d.active == 1) {\n      if (!this.alreadyApplied(d._id)) {\n        return /*#__PURE__*/_jsxDEV(Button, {\n          size: \"sm\",\n          variant: \"outline-primary\",\n          onClick: () => this.onClickApp(d),\n          children: \"Apply!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(Button, {\n          size: \"sm\",\n          variant: \"outline-warning\",\n          children: \"Applied!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 25\n        }, this);\n      }\n    }\n\n    if (d.active == 2) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        size: \"sm\",\n        variant: \"outline-danger\",\n        children: \"Full!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 20\n      }, this);\n    }\n  }\n\n  onCountOccurences(jobid) {\n    var occurences = 0;\n\n    for (var i = 0; i < this.state.occurences.length; i++) {\n      console.log(this.state.occurences[i], jobid);\n\n      if (this.state.occurences[i] === jobid) {\n        occurences = occurences + 1;\n      }\n    }\n\n    return occurences;\n  }\n\n  renderJobApp(d) {\n    var cur_date = new Date();\n    cur_date = cur_date.getTime();\n    console.log(Date.parse(d.deadline), cur_date, d.title);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-bordered\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Title: \", d.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Deadline: \", d.deadline]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Type: \", d.type]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Duration: \", d.duration, \" months\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Salary: \", d.salary]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Max Applicants: \", d.max_applicants]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Remaining Positions: \", d.max_positions - this.onCountOccurences(d._id)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\" Skills Required:\", this.renderSkills(d.skills)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\" Recruiter Contact: \", this.getRecruiter(d.recruiter, 'phone')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StarRatings, {\n            rating: d.rating,\n            starRatedColor: \"blue\",\n            changeRating: this.changeRating,\n            numberOfStars: 5,\n            name: d._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), this.renderApply(d)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }, this);\n  }\n\n  renderJobRec(d) {\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-bordered\",\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Title: \", d.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Deadline: \", d.deadline]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Type: \", d.type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Duration: \", d.duration, \" months\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Salary: \", d.salary]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\" Skills Required:\", this.renderSkills(d.skills)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Max Applicants: \", d.max_applicants]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Max Positions: \", d.max_positions]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"sm\",\n          variant: \"outline-primary\",\n          onClick: () => this.onClickRec(d),\n          children: \"Look at applications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 25\n        }, this), '  ', /*#__PURE__*/_jsxDEV(Button, {\n          size: \"sm\",\n          variant: \"outline-danger\",\n          onClick: () => this.onClickDelete(d),\n          children: \"Delete Job\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"sm\",\n          variant: \"outline-warning\",\n          onClick: () => this.onClickUpdate(d),\n          children: \"Update Job Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 13\n    }, this);\n  }\n\n  async onFilter(min_salary, max_salary, duration, type) {\n    var filtering = [];\n\n    if (this.state.filtered_job.length != 0) {\n      filtering = this.state.filtered_job;\n    } else {\n      filtering = this.state.jobs;\n    }\n\n    if (!type) {\n      await this.setState({\n        filtered_job: filtering.filter(job => job.salary > min_salary && job.salary < max_salary && job.duration < duration)\n      });\n    } else {\n      await this.setState({\n        filtered_job: filtering.filter(job => job.salary > min_salary && job.salary < max_salary && job.type == type && job.duration < duration)\n      });\n    }\n\n    if (this.state.filtered_job.length == 0) {\n      await this.setState({\n        no_results: 1\n      });\n    }\n  }\n\n  async onClearFilter() {\n    await this.setState({\n      filtered_job: []\n    });\n    await this.setState({\n      no_results: 0\n    });\n  }\n\n  renderJobs() {\n    var cur_date = new Date();\n    cur_date = cur_date.getTime();\n\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 17\n      }, this);\n    } else if (localStorage.getItem(\"type\") === 'Applicant' && this.state.filtered_job.length == 0 && this.state.no_results == 0) {\n      const job = this.state.jobs.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", (d.active == 1 || d.active == 2) && Date.parse(d.deadline) > cur_date ? this.renderJobApp(d) : '', \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 13\n      }, this));\n      return /*#__PURE__*/_jsxDEV(Container, {\n        children: job\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 17\n      }, this);\n    } else if (localStorage.getItem(\"type\") === 'Applicant' && (this.state.filtered_job.length != 0 || this.state.no_results == 1)) {\n      const job = this.state.filtered_job.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", (d.active == 1 || d.active == 2) && Date.parse(d.deadline) > cur_date ? this.renderJobApp(d) : '', \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 13\n      }, this));\n      return /*#__PURE__*/_jsxDEV(Container, {\n        children: job\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }, this);\n    } else if (localStorage.getItem(\"type\") === 'Recruiter' && this.state.filtered_job.length == 0 && this.state.no_results == 0) {\n      const job = this.state.jobs.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", d.active == 1 || d.active == 2 ? this.renderJobRec(d) : '', \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 13\n      }, this));\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: job\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 17\n      }, this);\n    } else if (localStorage.getItem(\"type\") === 'Recruiter' && (this.state.filtered_job.length != 0 || this.state.no_results == 1)) {\n      const job = this.state.filtered_job.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", d.active == 1 || d.active == 2 ? this.renderJobRec(d) : '', \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 13\n      }, this));\n      return /*#__PURE__*/_jsxDEV(Container, {\n        children: job\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-outline\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"search\",\n              id: \"form1\",\n              class: \"form-control\",\n              placeholder: \"Search\",\n              value: this.state.search_title,\n              onChange: this.onChangeSearchTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            variant: \"outline-success\",\n            onClick: () => this.onFuzzy(),\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Enter Max Duration: \", this.state.filter_duration]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n              alignRight: true,\n              title: \"Duration\",\n              id: \"dropdown\",\n              value: this.state.filter_duration,\n              onSelect: this.onChangeFilterDuration,\n              children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"1\",\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"2\",\n                children: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"3\",\n                children: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"4\",\n                children: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"5\",\n                children: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"6\",\n                children: \"6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"7\",\n                children: \"7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Enter Min Salary: \", this.state.filter_salary_min]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              value: this.state.filter_salary_min,\n              onChange: this.onChangeFilterSalaryMin,\n              placeholder: \"Enter Salary\",\n              className: \"form-range\",\n              min: \"0\",\n              max: \"1000000\",\n              step: \"1000\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Enter Max Salary: \", this.state.filter_salary_max]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              value: this.state.filter_salary_max,\n              onChange: this.onChangeFilterSalaryMax,\n              placeholder: \"Enter Salary\",\n              className: \"form-range\",\n              min: \"0\",\n              max: \"1000000\",\n              step: \"1000\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Type: \", this.state.filter_type]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n              alignRight: true,\n              title: \"Type\",\n              id: \"dropdown\",\n              value: this.state.filter_type,\n              onSelect: this.onChangeFilterType,\n              children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"Full-time\",\n                children: \"Full-time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"Contract\",\n                children: \"Contract\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n                eventKey: \"Intern\",\n                children: \"Intern\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            variant: \"outline-danger\",\n            onClick: () => this.onFilter(this.state.filter_salary_min, this.state.filter_salary_max, this.state.filter_duration, this.state.filter_type),\n            children: \"Filter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            variant: \"outline-success\",\n            onClick: () => this.onClearFilter(),\n            children: \"Clear\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2\",\n        children: this.renderJobs()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(JobView);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/karthik/Desktop/linkedin-clone/frontend/src/components/jobview.component.js"],"names":["axios","React","Component","Link","Container","withRouter","StarRatings","Button","DropdownButton","Dropdown","Fuse","JobView","constructor","props","componentWillMount","bind","renderJobs","getRecruiter","onClickApp","onClickRec","onChangeFilterDuration","onChangeFilterSalaryMax","onChangeFilterType","onChangeFilterSalaryMin","onFilter","onFuzzy","onChangeSearchTitle","state","jobs","recruiters","loading","filter_salary_max","filter_salary_min","filter_type","filter_duration","filtered_job","no_results","applications","id","search_title","occurences","sortby","sortin","User","token","localStorage","getItem","type","TokenVerify","alert","history","push","post","then","info","setState","data","result","url","jobids","i","length","_id","job","job_occurences","catch","error","console","log","res","fuse","keys","search","ans","item","e","target","value","renderSkills","skill","skills","map","d1","attr","len","usrid","phone","d","setItem","pathname","onClickDelete","window","location","reload","onClickUpdate","changeRating","newRating","name","requirements","rating","alreadyApplied","jobid","renderApply","active","onCountOccurences","renderJobApp","cur_date","Date","getTime","parse","deadline","title","duration","salary","max_applicants","max_positions","recruiter","renderJobRec","min_salary","max_salary","filtering","filter","onClearFilter","render"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\nimport StarRatings from 'react-star-ratings';\nimport Button from 'react-bootstrap/Button'\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport Fuse from 'fuse.js';\n\n\nclass JobView extends Component {\n    constructor(props) {\n        super(props);\n        this.componentWillMount = this.componentWillMount.bind(this);\n        this.renderJobs = this.renderJobs.bind(this);\n        this.getRecruiter = this.getRecruiter.bind(this);\n        this.onClickApp = this.onClickApp.bind(this);\n        this.onClickRec = this.onClickRec.bind(this);\n        this.onChangeFilterDuration = this.onChangeFilterDuration.bind(this);\n        this.onChangeFilterSalaryMax = this.onChangeFilterSalaryMax.bind(this);\n        this.onChangeFilterType = this.onChangeFilterType.bind(this);\n        this.onChangeFilterSalaryMin = this.onChangeFilterSalaryMin.bind(this);\n        this.onFilter = this.onFilter.bind(this);\n        this.onFuzzy = this.onFuzzy.bind(this);\n        this.onChangeSearchTitle = this.onChangeSearchTitle.bind(this);\n        this.state = {\n            jobs: [],\n            recruiters: [],\n            loading: true,\n            filter_salary_max: 1000000,\n            filter_salary_min: 0,\n            filter_type: '',\n            filter_duration: 0,\n            filtered_job: [],\n            no_results: 0,\n            applications: [],\n            id: '',\n            search_title: '',\n            occurences: [],\n            sortby: '',\n            sortin: 'asc'\n        };\n    }\n\n    componentWillMount() {\n        const User = {\n          token: localStorage.getItem(\"token\"),\n          type:localStorage.getItem(\"type\")\n        };\n\n        const TokenVerify = {\n            token: localStorage.getItem(\"token\")\n        }\n        \n        if(!User.token)\n        {\n            alert('Not permitted');\n            this.props.history.push('/');\n        }\n\n        if(User.type === 'Applicant') {\n        // List all jobs\n            axios.post(\"http://localhost:5000/jobs/viewall\" , TokenVerify)\n            .then(info => {\n               this.setState({jobs: info.data.jobs});\n               this.setState({recruiters: info.data.recruiters});\n               axios.post(\"http://localhost:5000/users/decode\" , TokenVerify)\n               .then(result => {\n                    this.setState({id: result.data.id});\n                    if(!result.data.id)\n                    {\n                        alert('Not permitted');\n                        this.props.history.push('/');\n                    }\n                    const url = \"http://localhost:5000/applicants/applications/\" + result.data.id\n                    axios.post(url , TokenVerify)\n                    .then(applications => {\n                        if(applications.data == 1)\n                        {\n                            alert('Not permitted');\n                            this.props.history.push('/login');\n                        }\n                        this.setState({applications: applications.data});\n                        var jobids = [];\n                        for(var i = 0 ; i < info.data.jobs.length ; i++)\n                        {\n                            jobids.push(info.data.jobs[i]._id);\n                        }\n\n                        const job = {\n                            id: jobids\n                        }\n\n                        axios.post(\"http://localhost:5000/jobs/applications/countall\" , job)\n                        .then(applications => {\n                            var job_occurences = [];\n                            for(var i = 0 ; i < applications.data.length ; i++)\n                            {\n                                job_occurences.push(applications.data[i].job);\n                            }\n                            this.setState({occurences: job_occurences});\n                        })\n                        this.setState({loading: false});\n                    })\n                    .catch((error) => console.log(error));\n               })\n               .catch((error) => console.log(error));\n\n            })\n            .catch((error) => console.log(error));\n         \n        }\n        if(User.type === 'Recruiter') {\n            axios.post(\"http://localhost:5000/users/decode\" , TokenVerify)\n            .then(res => {\n                if(!res.data.id) {\n                    alert('Not permitted');\n                    this.props.history.push('/');\n                }\n                else {\n                    const url = \"http://localhost:5000/recruiters/\" + res.data.id + \"/jobs\";\n                    axios.post(url , TokenVerify)\n                    .then(jobs => {\n                        this.setState({jobs: jobs.data});\n                        this.setState({loading: false});\n                    })\n                    .catch((error) => console.log(error));\n                }\n            })\n        }\n\n    }\n\n    async onFuzzy() {\n        var res = []\n        if(this.state.filtered_job.length == 0)\n        {\n            const fuse = new Fuse(this.state.jobs, {\n                keys: ['title']\n            });\n\n            res = fuse.search(this.state.search_title);\n        }\n        else \n        {\n            const fuse = new Fuse(this.state.filtered_job, {\n                keys: ['title']\n            });\n\n            res = fuse.search(this.state.search_title);\n        }\n\n        var ans = [];\n        for(var i = 0 ; i < res.length ; i++ )\n        {\n            ans.push(res[i].item);\n        }\n        await this.setState({filtered_job: ans});\n    }\n\n    onChangeSearchTitle(e) {\n        this.setState({\n            search_title: e.target.value\n        })\n    }\n\n    onChangeFilterSalaryMax(e){\n        this.setState({\n            filter_salary_max: e.target.value\n        });\n    }\n\n    onChangeFilterSalaryMin(e){\n        this.setState({\n            filter_salary_min: e.target.value\n        });\n    }\n    \n    onChangeFilterType(e){\n        this.setState({\n            filter_type: e\n        });\n    }\n\n    onChangeFilterDuration(e){\n        this.setState({\n            filter_duration: e\n        });\n    }\n\n    renderSkills(skill) {\n        const skills = skill.map((d1) => \n        <div key={d1}> {d1} </div>\n        );\n\n        return skills;\n    }\n\n    getRecruiter(id , attr) {\n        \n        const len = this.state.recruiters.length;\n        if(len != 0)\n        {\n            for(var i = 0 ; i < len ; i++)\n            {   \n                if(id === this.state.recruiters[i].usrid)\n                {\n                    return this.state.recruiters[i].phone;\n                }\n            }\n\n        }\n    }\n    \n    onClickApp(d) {\n        localStorage.setItem('jobid' , d._id);\n        this.props.history.push({pathname: '/apply' , state: d._id});\n    }\n\n    onClickRec(d) {\n        localStorage.setItem('jobid' , d._id);\n        this.props.history.push({pathname: '/appviewjob' , state: d._id});\n    }\n\n    onClickDelete(d) {\n        const TokenVerify = {\n            token: localStorage.getItem(\"token\")\n        }\n        const url = \"http://localhost:5000/jobs/delete/\" + d._id;\n        axios.post(url , TokenVerify)\n        .then(result => {\n            if(result.data == 1) {\n                alert('Not Permitted!');\n                this.props.history.push('/login');\n            }\n\n            else {\n                alert('Successfully Deleted!');\n                window.location.reload(false);\n            }\n        })\n    }\n\n    onClickUpdate(d) {\n        this.props.history.push({pathname: '/updatejob' , state: d._id});\n    }\n\n    changeRating( newRating, name ) {\n        const url = \"http://localhost:5000/jobs/updateratings/\" + name;\n        const requirements = {\n            token: localStorage.getItem('token'),\n            rating: newRating\n        };\n        axios.post(url , requirements)\n        .then(result => {\n            if(result.data == 1)\n            {\n                alert('Not Authorized!');\n                this.props.history.push('/login');\n            }\n            else if(result.data == 2)\n            {\n                alert('Already Rated');\n            }\n            else{\n                alert('Successful!');\n                window.location.reload(false);\n            }\n        })\n    }\n\n    alreadyApplied(jobid) {\n\n        const len = this.state.applications.length;\n        if(len != 0){\n            for(var i = 0 ; i < len ; i++) {\n                if(jobid === this.state.applications[i].job)\n                {\n                    return 1;\n                }\n            }\n        }\n        return 0;\n    }\n\n    renderApply(d){\n        if(d.active == 1)\n        {\n            if(!this.alreadyApplied(d._id)) {\n                return (\n                    <Button size=\"sm\" variant=\"outline-primary\" onClick={() => this.onClickApp(d)}>Apply!</Button>\n                )\n            }\n            else {\n                return (<Button size=\"sm\" variant=\"outline-warning\">Applied!</Button>);\n            }\n        }\n        if(d.active == 2)\n        {\n            return(<Button size=\"sm\" variant=\"outline-danger\">Full!</Button>)\n        }\n    }\n\n    onCountOccurences(jobid)\n    {\n        var occurences = 0;\n        for(var i = 0 ; i < this.state.occurences.length ; i++)\n        {\n            console.log(this.state.occurences[i] , jobid);\n            if(this.state.occurences[i] === jobid)\n            {\n                occurences = occurences + 1;\n            }\n        }\n        return occurences;\n    }\n\n    renderJobApp(d) {\n        var cur_date = new Date();\n        cur_date = cur_date.getTime();\n        console.log(Date.parse(d.deadline) , cur_date , d.title);\n        return (\n            <div>\n            <table className=\"table table-bordered\">\n            <tbody>\n            <tr className=\"table-danger\">Title: {d.title}</tr>\n            <tr className=\"table-danger\">Deadline: {d.deadline}</tr>\n            <tr className=\"table-danger\">Type: {d.type}</tr>\n            <tr className=\"table-danger\">Duration: {d.duration} months</tr>\n            <tr className=\"table-danger\">Salary: {d.salary}</tr>\n            <tr className=\"table-danger\">Max Applicants: {d.max_applicants}</tr>\n            <tr className=\"table-danger\">Remaining Positions: {d.max_positions - this.onCountOccurences(d._id)}</tr>\n            <tr className=\"table-danger\"> Skills Required: \n            {this.renderSkills(d.skills)}\n            </tr>\n            <tr className=\"table-danger\"> Recruiter Contact: {this.getRecruiter(d.recruiter , 'phone')}</tr>\n            <StarRatings rating={d.rating} starRatedColor=\"blue\" changeRating={this.changeRating} numberOfStars={5} name={d._id}/>\n            {this.renderApply(d)}\n            </tbody>\n            </table>\n            </div>\n       \n        );\n    }\n\n    renderJobRec(d) {\n        return (\n            <table className=\"table table-bordered\">\n                        <tbody>\n                        <tr className=\"table-danger\">Title: {d.title}</tr>\n                        <tr className=\"table-danger\">Deadline: {d.deadline}</tr>\n                        <tr className=\"table-danger\">Type: {d.type}</tr>\n                        <tr className=\"table-danger\">Duration: {d.duration} months</tr>\n                        <tr className=\"table-danger\">Salary: {d.salary}</tr>\n                        <tr className=\"table-danger\"> Skills Required: \n                        {this.renderSkills(d.skills)}\n                        </tr>\n                        <tr className=\"table-danger\">Max Applicants: {d.max_applicants}</tr>\n                        <tr className=\"table-danger\">Max Positions: {d.max_positions}</tr>\n                        <Button size=\"sm\" variant=\"outline-primary\" onClick={() => this.onClickRec(d)}>Look at applications</Button>{'  '}\n                        <Button size=\"sm\" variant=\"outline-danger\" onClick={() => this.onClickDelete(d)}>Delete Job</Button>\n                        <Button size=\"sm\" variant=\"outline-warning\" onClick={() => this.onClickUpdate(d)}>Update Job Details</Button>\n                        </tbody>\n            </table>\n        );\n\n    }\n\n    async onFilter(min_salary , max_salary , duration , type){\n        var filtering = []\n        if(this.state.filtered_job.length != 0)\n        {\n            filtering = this.state.filtered_job;\n        }\n        else \n        {\n            filtering = this.state.jobs;\n        }\n        if(!type) {\n            await this.setState({filtered_job: filtering.filter(job => (job.salary > min_salary && job.salary < max_salary && job.duration < duration))});\n        }\n        else {\n            await this.setState({filtered_job: filtering.filter(job => (job.salary > min_salary && job.salary < max_salary && job.type==type && job.duration < duration))});\n        }\n\n        if(this.state.filtered_job.length == 0)\n        {\n            await this.setState({no_results: 1});\n        }\n    }\n\n    async onClearFilter() {\n        await this.setState({filtered_job: []});\n        await this.setState({no_results: 0});\n    }\n\n    renderJobs(){\n        var cur_date = new Date();\n        cur_date = cur_date.getTime();\n        if(this.state.loading)\n        {\n            return (\n                <div>Loading ...</div>\n            );\n            \n        }\n\n        else if(localStorage.getItem(\"type\") === 'Applicant' && this.state.filtered_job.length == 0 && this.state.no_results == 0)\n        {\n            const job = this.state.jobs.map((d) => \n            <div> {((d.active==1 || d.active==2) && Date.parse(d.deadline) > cur_date)? this.renderJobApp(d) : '' } </div>\n            );\n            return (\n                <Container>{job}</Container>\n            );\n        }\n\n        else if(localStorage.getItem(\"type\") === 'Applicant' && (this.state.filtered_job.length != 0 || this.state.no_results == 1))\n        {\n            const job = this.state.filtered_job.map((d) => \n            <div> {((d.active==1 || d.active==2) && Date.parse(d.deadline) > cur_date) ? this.renderJobApp(d) : '' } </div>\n            );\n            return (\n                <Container>{job}</Container>\n            );\n        }\n\n        else if(localStorage.getItem(\"type\") === 'Recruiter' && (this.state.filtered_job.length == 0 && this.state.no_results == 0))\n        {\n\n            const job = this.state.jobs.map((d) => \n            <div> {(d.active==1 || d.active==2) ? this.renderJobRec(d) : '' } </div>\n            );\n            return (\n                <div>{job}</div>\n            );\n        }\n\n        else if(localStorage.getItem(\"type\") === 'Recruiter' && (this.state.filtered_job.length != 0 || this.state.no_results == 1))\n        {\n            const job = this.state.filtered_job.map((d) => \n            <div> {(d.active==1 || d.active==2) ? this.renderJobRec(d) : '' } </div>\n            );\n            return (\n                <Container>{job}</Container>\n            );\n        }\n    }\n    \n    render(){\n        return (\n            <div className=\"d-flex flex-row\">\n                <div className=\"p-2\">\n                    <div class=\"input-group\">\n                        <div class=\"form-outline\">\n                            <input type=\"search\" id=\"form1\" class=\"form-control\" placeholder=\"Search\" value={this.state.search_title} onChange={this.onChangeSearchTitle}/>\n                        </div>\n                        <Button size=\"sm\" variant=\"outline-success\" onClick={() => this.onFuzzy()}>Submit</Button>\n                    </div>\n                    <div className=\"d-flex flex-column\">\n                        <div>\n                            <label>Enter Max Duration: {this.state.filter_duration}</label>\n                            <DropdownButton alignRight title=\"Duration\" id=\"dropdown\" value={this.state.filter_duration} onSelect={this.onChangeFilterDuration} >\n                                <Dropdown.Item eventKey=\"1\">1</Dropdown.Item>\n                                <Dropdown.Divider />\n                                <Dropdown.Item eventKey=\"2\">2</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"3\">3</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"4\">4</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"5\">5</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"6\">6</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"7\">7</Dropdown.Item>\n                            </DropdownButton>\n                        </div>\n                        <div className=\"d-flex flex-column\">\n                            <label>Enter Min Salary: {this.state.filter_salary_min}</label>\n                            <input type=\"range\" value={this.state.filter_salary_min} onChange={this.onChangeFilterSalaryMin} placeholder=\"Enter Salary\" className=\"form-range\" min=\"0\" max=\"1000000\" step=\"1000\"/>\n                        </div>\n                        <div className=\"d-flex flex-column\">\n                            <label>Enter Max Salary: {this.state.filter_salary_max}</label>\n                            <input type=\"range\" value={this.state.filter_salary_max} onChange={this.onChangeFilterSalaryMax} placeholder=\"Enter Salary\" className=\"form-range\" min=\"0\" max=\"1000000\" step=\"1000\"/>\n                        </div>\n                        <div>\n                            <label>Type: {this.state.filter_type}</label>\n                            <DropdownButton alignRight title=\"Type\" id=\"dropdown\" value={this.state.filter_type} onSelect={this.onChangeFilterType} >\n                                <Dropdown.Item eventKey=\"Full-time\">Full-time</Dropdown.Item>\n                                <Dropdown.Divider />\n                                <Dropdown.Item eventKey=\"Contract\">Contract</Dropdown.Item>\n                                <Dropdown.Divider />\n                                <Dropdown.Item eventKey=\"Intern\">Intern</Dropdown.Item>\n                            </DropdownButton>\n                        </div>\n                        <Button size=\"sm\" variant=\"outline-danger\" onClick={() => this.onFilter(this.state.filter_salary_min , this.state.filter_salary_max , this.state.filter_duration, this.state.filter_type)}>Filter</Button>\n                        <Button size=\"sm\" variant=\"outline-success\" onClick={() => this.onClearFilter()}>Clear</Button>\n                    </div>\n                </div>\n                <div className=\"p-2\">{this.renderJobs()}</div>\n            </div>\n        )\n    }\n\n}\n\nexport default withRouter(JobView);"]},"metadata":{},"sourceType":"module"}