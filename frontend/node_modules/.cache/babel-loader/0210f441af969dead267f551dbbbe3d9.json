{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/karthik/Desktop/linkedin-clone/frontend/src/components/viewaccepted.component.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\nimport StarRatings from 'react-star-ratings';\nimport Button from 'react-bootstrap/Button';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\n\nclass appViewJob extends Component {\n  constructor(props) {\n    super(props);\n    this.componentWillMount = this.componentWillMount.bind(this);\n    this.renderApps = this.renderApps.bind(this);\n    this.renderAppDetails = this.renderAppDetails.bind(this);\n    this.onChangeSortBy = this.onChangeSortBy.bind(this);\n    this.onChangeSortIn = this.onChangeSortIn.bind(this);\n    this.clearSort = this.clearSort.bind(this);\n    this.state = {\n      loading: true,\n      applicants: {},\n      applications: {},\n      users: {},\n      sortby: '',\n      sortin: 'asc',\n      sorted_app: [],\n      clear_sorted: 1,\n      jobs: []\n    };\n  }\n\n  componentWillMount() {\n    const User = {\n      token: localStorage.getItem('token'),\n      type: localStorage.getItem('type')\n    };\n    const tokenVerify = {\n      token: localStorage.getItem('token')\n    };\n\n    if (User.type !== 'Recruiter' || !User.token) {\n      alert('Not Permitted');\n      this.props.history.push('/login');\n    }\n\n    console.log(User.token);\n    const url = \"http://localhost:5000/recruiters/accepted/viewall\";\n    axios.post(url, tokenVerify).then(results => {\n      if (results.data == 1 || results.data == 2) {\n        alert('Not Data');\n        this.props.history.push('/login');\n      } else {\n        this.setState({\n          applicants: results.data.applicants\n        });\n        this.setState({\n          applications: results.data.applications\n        });\n        this.setState({\n          users: results.data.users\n        });\n        this.setState({\n          jobs: results.data.jobs\n        });\n        this.setState({\n          loading: false\n        });\n      }\n    });\n  }\n\n  onChangeSortBy(e) {\n    this.setState({\n      sortby: e\n    });\n  }\n\n  onChangeSortIn(e) {\n    this.setState({\n      sortin: e\n    });\n  }\n\n  onClearSorted(e) {\n    this.setState({\n      clear_sorted: 1\n    });\n  }\n\n  async clearSort() {\n    await this.setState({\n      clear_sorted: 1\n    });\n    await this.setState({\n      sorted_app: []\n    });\n  }\n\n  getApplicantDetails(applicantid) {\n    const len = this.state.applicants.length;\n\n    if (len != 0) {\n      for (var i = 0; i < len; i++) {\n        if (this.state.applicants[i].usrid === applicantid) {\n          const applicantDetails = {\n            skills: this.state.applicants[i].skills,\n            education: this.state.applicants[i].education,\n            languages: this.state.applicants[i].languages,\n            email: this.getUserDetails(applicantid, 'email'),\n            name: this.getUserDetails(applicantid, 'name'),\n            rating: this.state.applicants[i].rating,\n            usrid: this.state.applicants[i].usrid\n          };\n          return applicantDetails;\n        }\n      }\n    }\n  }\n\n  getUserDetails(userid, attr) {\n    const len = this.state.users.length;\n\n    if (len != 0) {\n      for (var i = 0; i < len; i++) {\n        if (this.state.users[i]._id === userid) {\n          if (attr === 'email') {\n            return this.state.users[i].email;\n          }\n\n          if (attr === 'name') {\n            return this.state.users[i].name;\n          }\n        }\n      }\n    }\n  }\n\n  getStatus(status) {\n    if (status == 0) return 'Submitted!';else if (status == 1) return 'Shortlisted!';else if (status == 2) return 'Accepted!';else if (status == 3) return 'Rejected :(';\n  }\n\n  changeRating(newRating, name) {\n    const url = \"http://localhost:5000/applicants/updateratings/\" + name;\n    const requirements = {\n      token: localStorage.getItem('token'),\n      rating: newRating\n    };\n    axios.post(url, requirements).then(result => {\n      if (result.data == 1) {\n        alert('Not Authorized!');\n        this.props.history.push('/login');\n      } else if (result.data == 2) {\n        alert('Already Rated');\n      } else {\n        alert('Successful!');\n        window.location.reload(false);\n      }\n    });\n  }\n\n  onSort(sortby, sortin) {\n    this.setState({\n      loading: true\n    });\n    this.setState({\n      sorted_app: this.state.applications\n    });\n\n    if (sortby === 'Rating') {\n      if (sortin === \"asc\") {\n        this.state.sorted_app.sort((a, b) => {\n          if (this.getApplicantDetails(a.applicant).rating > this.getApplicantDetails(b.applicant).rating) {\n            return 1;\n          } else if (this.getApplicantDetails(a.applicant).rating < this.getApplicantDetails(b.applicant).rating) {\n            return -1;\n          } else return 0;\n        });\n      } else if (sortin === \"des\") {\n        this.state.sorted_app.sort((a, b) => {\n          if (this.getApplicantDetails(a.applicant).rating > this.getApplicantDetails(b.applicant).rating) {\n            return -1;\n          } else if (this.getApplicantDetails(a.applicant).rating < this.getApplicantDetails(b.applicant).rating) {\n            return +1;\n          } else return 0;\n        });\n      }\n    }\n\n    if (sortby === 'Date') {\n      if (sortin === \"asc\") {\n        this.state.sorted_app.sort((a1, b1) => {\n          const a = this.getJobDetails(a1.job).posting_date;\n          const b = this.getJobDetails(b1.job).posting_date;\n\n          if (this.formatDate(a.year, a.month, a.date) > this.formatDate(b.year, b.month, b.date)) {\n            return 1;\n          } else if (this.formatDate(a.year, a.month, a.date) < this.formatDate(b.year, b.month, b.date)) {\n            return -1;\n          } else return 0;\n        });\n      } else if (sortin === \"des\") {\n        this.state.sorted_app.sort((a1, b1) => {\n          const a = this.getJobDetails(a1.job).posting_date;\n          const b = this.getJobDetails(b1.job).posting_date;\n\n          if (this.formatDate(a.year, a.month, a.date) > this.formatDate(b.year, b.month, b.date)) {\n            return -1;\n          } else if (this.formatDate(a.year, a.month, a.date) < this.formatDate(b.year, b.month, b.date)) {\n            return +1;\n          } else return 0;\n        });\n      }\n    }\n\n    if (sortby === 'Name') {\n      if (sortin === \"asc\") {\n        this.state.sorted_app.sort((a, b) => {\n          if (this.getApplicantDetails(a.applicant).name.toLowerCase() > this.getApplicantDetails(b.applicant).name.toLowerCase()) {\n            return 1;\n          } else if (this.getApplicantDetails(a.applicant).name.toLowerCase() < this.getApplicantDetails(b.applicant).name.toLowerCase()) {\n            return -1;\n          } else return 0;\n        });\n      } else if (sortin === \"des\") {\n        this.state.sorted_app.sort((a, b) => {\n          if (this.getApplicantDetails(a.applicant).name.toLowerCase() > this.getApplicantDetails(b.applicant).name.toLowerCase()) {\n            return -1;\n          } else if (this.getApplicantDetails(a.applicant).name.toLowerCase() < this.getApplicantDetails(b.applicant).name.toLowerCase()) {\n            return 1;\n          } else return 0;\n        });\n      }\n    }\n\n    if (sortby === 'Title') {\n      if (sortin === \"asc\") {\n        this.state.sorted_app.sort((a, b) => {\n          if (this.getJobDetails(a.job).title.toLowerCase() > this.getJobDetails(b.job).title.toLowerCase()) {\n            return 1;\n          } else if (this.getJobDetails(a.job).title.toLowerCase() < this.getJobDetails(b.job).title.toLowerCase()) {\n            return -1;\n          } else return 0;\n        });\n      } else if (sortin === \"des\") {\n        this.state.sorted_app.sort((a, b) => {\n          if (this.getJobDetails(a.job).title.toLowerCase() > this.getJobDetails(b.job).title.toLowerCase()) {\n            return -1;\n          } else if (this.getJobDetails(a.job).title.toLowerCase() < this.getJobDetails(b.job).title.toLowerCase()) {\n            return 1;\n          } else return 0;\n        });\n      }\n    }\n\n    this.setState({\n      loading: false\n    });\n    this.setState({\n      clear_sorted: 0\n    });\n  }\n\n  formatDate(day, month, year) {\n    return new Date(year, month, day, 0, 0, 0);\n  }\n\n  getJobDetails(jobid) {\n    for (var i = 0; i < this.state.jobs.length; i++) {\n      console.log(jobid, this.state.jobs[i]._id);\n\n      if (jobid == this.state.jobs[i]._id) {\n        const jobDetails = {\n          posting_date: this.state.jobs[i].posting_date,\n          title: this.state.jobs[i].title,\n          type: this.state.jobs[i].type\n        };\n        return jobDetails;\n      }\n    }\n  }\n\n  renderAppDetails(d) {\n    if (d.accept == 3) {\n      return '';\n    }\n\n    const appl = this.getApplicantDetails(d.applicant);\n    const skill_render = appl.skills.map(d => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: d\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 53\n    }, this));\n    const lang_render = appl.languages.map(d => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: d\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 55\n    }, this));\n    const edu_render = appl.education.map(d => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: [d.college, \" \", '  ', d.start_year, \" \", '  ', d.end_year]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }, this));\n    const job_details = this.getJobDetails(d.job);\n    console.log(job_details);\n    const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-bordered\",\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Name: \", appl.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Email: \", appl.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Date applied: \", d.applied]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Type: \", job_details.type, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Join Date: \", job_details.posting_date.date, \" \", monthNames[job_details.posting_date.month], \", \", job_details.posting_date.year]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"table-danger\",\n          children: [\"Title: \", job_details.title, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(StarRatings, {\n          rating: this.getApplicantDetails(d.applicant).rating,\n          starRatedColor: \"blue\",\n          changeRating: this.changeRating,\n          numberOfStars: 5,\n          name: this.getApplicantDetails(d.applicant).usrid\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 9\n    }, this);\n  }\n\n  renderApps() {\n    if (this.state.loading || !this.state.applications) {\n      console.log(localStorage.getItem(\"type\"));\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }, this);\n    } else if (localStorage.getItem(\"type\") === 'Recruiter' && this.state.clear_sorted == 1) {\n      const apps = this.state.applications.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", this.renderAppDetails(d), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 13\n      }, this));\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: apps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }, this);\n    } else if (localStorage.getItem(\"type\") === 'Recruiter' && this.state.clear_sorted == 0) {\n      const apps = this.state.sorted_app.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", this.renderAppDetails(d), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 13\n      }, this));\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: apps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Sort by: \", this.state.sortby]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n            alignRight: true,\n            title: \"Sort by\",\n            id: \"dropdown\",\n            value: this.state.sortby,\n            onSelect: this.onChangeSortBy,\n            children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n              eventKey: \"Rating\",\n              children: \"Rating\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n              eventKey: \"Name\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n              eventKey: \"Date\",\n              children: \"Posting date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n              eventKey: \"Title\",\n              children: \"Job Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Sort in: \", this.state.sortin]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n            alignRight: true,\n            title: \"Sort in\",\n            id: \"dropdown\",\n            value: this.state.sortin,\n            onSelect: this.onChangeSortIn,\n            children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n              eventKey: \"asc\",\n              children: \"Ascending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n              eventKey: \"des\",\n              children: \"Descending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Sort by title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            variant: \"outline-primary\",\n            onClick: () => this.onSort(this.state.sortby, this.state.sortin),\n            children: \"Sort\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 align-self-center\",\n        children: this.renderApps()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default withRouter(appViewJob);","map":{"version":3,"sources":["/Users/karthik/Desktop/linkedin-clone/frontend/src/components/viewaccepted.component.js"],"names":["axios","React","Component","Link","Container","withRouter","StarRatings","Button","DropdownButton","Dropdown","appViewJob","constructor","props","componentWillMount","bind","renderApps","renderAppDetails","onChangeSortBy","onChangeSortIn","clearSort","state","loading","applicants","applications","users","sortby","sortin","sorted_app","clear_sorted","jobs","User","token","localStorage","getItem","type","tokenVerify","alert","history","push","console","log","url","post","then","results","data","setState","e","onClearSorted","getApplicantDetails","applicantid","len","length","i","usrid","applicantDetails","skills","education","languages","email","getUserDetails","name","rating","userid","attr","_id","getStatus","status","changeRating","newRating","requirements","result","window","location","reload","onSort","sort","a","b","applicant","a1","b1","getJobDetails","job","posting_date","formatDate","year","month","date","toLowerCase","title","day","Date","jobid","jobDetails","d","accept","appl","skill_render","map","lang_render","edu_render","college","start_year","end_year","job_details","monthNames","applied","apps","render"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\nimport StarRatings from 'react-star-ratings';\nimport Button from 'react-bootstrap/Button';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\n\nclass appViewJob extends Component {\n    constructor(props) {\n        super(props);\n        this.componentWillMount = this.componentWillMount.bind(this);\n        this.renderApps = this.renderApps.bind(this);\n        this.renderAppDetails = this.renderAppDetails.bind(this);\n        this.onChangeSortBy = this.onChangeSortBy.bind(this);\n        this.onChangeSortIn = this.onChangeSortIn.bind(this);\n        this.clearSort = this.clearSort.bind(this);\n        this.state = {\n            loading: true,\n            applicants: {},\n            applications: {},\n            users: {},\n            sortby: '',\n            sortin: 'asc',\n            sorted_app: [],\n            clear_sorted: 1,\n            jobs: []\n        }\n    }\n\n    componentWillMount() {\n\n        const User = {\n            token: localStorage.getItem('token'),           \n            type: localStorage.getItem('type')\n        }\n\n        const tokenVerify = {\n            token: localStorage.getItem('token')\n        }\n\n        if(User.type !== 'Recruiter' || !User.token)\n        {\n            alert('Not Permitted');\n            this.props.history.push('/login');\n        }\n        console.log(User.token);\n        const url = \"http://localhost:5000/recruiters/accepted/viewall\";\n        axios.post(url , tokenVerify)\n        .then(results => {\n            if(results.data == 1 || results.data == 2) {\n                alert('Not Data');\n                this.props.history.push('/login');\n            }\n\n            else {\n                this.setState({applicants: results.data.applicants});\n                this.setState({applications: results.data.applications});\n                this.setState({users: results.data.users});\n                this.setState({jobs: results.data.jobs});\n                this.setState({loading: false});\n            }\n        })\n\n    }\n\n    onChangeSortBy(e){\n        this.setState({\n            sortby: e\n        })\n    }\n\n    onChangeSortIn(e){\n        this.setState({\n            sortin: e\n        })\n    }\n\n    onClearSorted(e){\n        this.setState({\n            clear_sorted: 1\n        })\n    }\n\n    async clearSort() {\n\n        await this.setState({\n            clear_sorted: 1\n        });\n        await this.setState({\n            sorted_app: []\n        })\n    }\n\n    getApplicantDetails(applicantid) {\n        const len = this.state.applicants.length;\n        if(len != 0) {\n            for(var i = 0 ; i < len ; i++)\n            {\n                if(this.state.applicants[i].usrid === applicantid) {\n                    const applicantDetails = {\n                        skills: this.state.applicants[i].skills,\n                        education: this.state.applicants[i].education,\n                        languages: this.state.applicants[i].languages,\n                        email: this.getUserDetails(applicantid , 'email'),\n                        name: this.getUserDetails(applicantid , 'name'),\n                        rating: this.state.applicants[i].rating,\n                        usrid: this.state.applicants[i].usrid\n                    }\n                    return applicantDetails;\n                }\n            }\n        }\n\n    }\n\n    getUserDetails(userid , attr) {\n        const len = this.state.users.length;\n        if(len != 0) {\n            for(var i = 0 ; i < len ; i++)\n            {\n                if(this.state.users[i]._id === userid)\n                {\n                    if(attr === 'email')\n                    {\n                        return this.state.users[i].email;\n                    }\n\n                    if(attr === 'name')\n                    {\n                        return this.state.users[i].name;\n                    }\n                }\n            }\n        }\n    }\n\n    getStatus(status) {\n\n        if(status == 0)\n            return 'Submitted!';\n        else if(status == 1)\n            return 'Shortlisted!';\n        else if(status == 2)\n            return 'Accepted!';\n        else if(status == 3)\n            return 'Rejected :(';\n    }\n\n    changeRating( newRating , name ) {\n        const url = \"http://localhost:5000/applicants/updateratings/\" + name;\n        const requirements = {\n            token: localStorage.getItem('token'),\n            rating: newRating\n        };\n        axios.post(url , requirements)\n        .then(result => {\n            if(result.data == 1)\n            {\n                alert('Not Authorized!');\n                this.props.history.push('/login');\n            }\n            else if(result.data == 2)\n            {\n                alert('Already Rated');\n            }\n            else{\n                alert('Successful!');\n                window.location.reload(false);\n            }\n        })\n    }\n\n    onSort(sortby, sortin){\n        this.setState({loading: true});\n        this.setState({sorted_app: this.state.applications});\n        if(sortby === 'Rating')\n        {\n            if(sortin === \"asc\")\n            {\n                this.state.sorted_app.sort((a,b) =>  {\n                    if(this.getApplicantDetails(a.applicant).rating > this.getApplicantDetails(b.applicant).rating) {return 1} \n                    else if(this.getApplicantDetails(a.applicant).rating < this.getApplicantDetails(b.applicant).rating) {return -1}\n                    else return 0\n                }   \n                );\n            }\n\n            else if(sortin === \"des\")\n            {\n                this.state.sorted_app.sort((a,b) =>  {\n                    if(this.getApplicantDetails(a.applicant).rating > this.getApplicantDetails(b.applicant).rating) {return -1} \n                    else if(this.getApplicantDetails(a.applicant).rating < this.getApplicantDetails(b.applicant).rating) {return +1}\n                    else return 0\n                }   \n                );\n            }\n        }\n\n        if(sortby === 'Date')\n        {\n            if(sortin === \"asc\")\n            {\n                this.state.sorted_app.sort((a1,b1) =>  {\n                    const a = this.getJobDetails(a1.job).posting_date;\n                    const b = this.getJobDetails(b1.job).posting_date;\n                    if(this.formatDate(a.year , a.month , a.date) > this.formatDate(b.year , b.month , b.date)) {return 1} \n                    else if(this.formatDate(a.year , a.month , a.date) < this.formatDate(b.year , b.month , b.date)) {return -1}\n                    else return 0\n                }   \n                );\n            }\n\n            else if(sortin === \"des\")\n            {\n                this.state.sorted_app.sort((a1,b1) =>  {\n                    const a = this.getJobDetails(a1.job).posting_date;\n                    const b = this.getJobDetails(b1.job).posting_date;\n                    if(this.formatDate(a.year , a.month , a.date) > this.formatDate(b.year , b.month , b.date)) {return -1} \n                    else if(this.formatDate(a.year , a.month , a.date) < this.formatDate(b.year , b.month , b.date)) {return +1}\n                    else return 0\n                }   \n                );\n            }\n        }\n\n        if(sortby === 'Name')\n        {\n            if(sortin === \"asc\")\n            {\n                this.state.sorted_app.sort((a,b) =>  {\n                    if(this.getApplicantDetails(a.applicant).name.toLowerCase() > this.getApplicantDetails(b.applicant).name.toLowerCase()) {return 1} \n                    else if(this.getApplicantDetails(a.applicant).name.toLowerCase() < this.getApplicantDetails(b.applicant).name.toLowerCase()) {return -1}\n                    else return 0\n                }   \n                );\n            }\n\n            else if(sortin === \"des\")\n            {\n                this.state.sorted_app.sort((a,b) =>  {\n                    if(this.getApplicantDetails(a.applicant).name.toLowerCase() > this.getApplicantDetails(b.applicant).name.toLowerCase()) {return -1} \n                    else if(this.getApplicantDetails(a.applicant).name.toLowerCase() < this.getApplicantDetails(b.applicant).name.toLowerCase()) {return 1}\n                    else return 0\n                }   \n                );\n            }\n        }\n\n        if(sortby === 'Title')\n        {\n            if(sortin === \"asc\")\n            {\n                this.state.sorted_app.sort((a,b) =>  {\n                    if(this.getJobDetails(a.job).title.toLowerCase() > this.getJobDetails(b.job).title.toLowerCase()) {return 1} \n                    else if(this.getJobDetails(a.job).title.toLowerCase() < this.getJobDetails(b.job).title.toLowerCase()) {return -1}\n                    else return 0\n                }   \n                );\n            }\n\n            else if(sortin === \"des\")\n            {\n                this.state.sorted_app.sort((a,b) =>  {\n                    if(this.getJobDetails(a.job).title.toLowerCase() > this.getJobDetails(b.job).title.toLowerCase()) {return -1} \n                    else if(this.getJobDetails(a.job).title.toLowerCase() < this.getJobDetails(b.job).title.toLowerCase()) {return 1}\n                    else return 0\n                }   \n                );\n            }\n\n        }\n        this.setState({loading: false});\n        this.setState({clear_sorted: 0});\n    };\n\n    formatDate(day , month , year)\n    {\n        return new Date(year,month, day,0,0,0);\n    }\n\n    getJobDetails(jobid){\n        for(var i = 0 ; i < this.state.jobs.length ; i++)\n        {\n            console.log(jobid , this.state.jobs[i]._id);\n            if(jobid == this.state.jobs[i]._id)\n            {\n                const jobDetails = {\n                    posting_date: this.state.jobs[i].posting_date,\n                    title: this.state.jobs[i].title,\n                    type: this.state.jobs[i].type\n                }\n                return jobDetails;\n            }\n        }\n       \n    }\n\n    renderAppDetails(d) {\n        if(d.accept == 3)\n        {\n            return '';\n        }\n        const appl = this.getApplicantDetails(d.applicant);\n        const skill_render = appl.skills.map((d) => <li>{d}</li>);\n        const lang_render = appl.languages.map((d) => <li>{d}</li>);\n        const edu_render = appl.education.map((d) =>\n        <li>\n        {d.college} {'  '}\n        {d.start_year} {'  '}\n        {d.end_year}\n        </li>\n        );\n        const job_details = this.getJobDetails(d.job);\n        console.log(job_details);\n        const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n        return (\n        <table className=\"table table-bordered\">\n                    <tbody>\n                    <tr className=\"table-danger\">Name: {appl.name}</tr>\n                    <tr className=\"table-danger\">Email: {appl.email}</tr>\n                    <tr className=\"table-danger\">Date applied: {d.applied}</tr>\n                    <tr className=\"table-danger\">Type: {job_details.type} </tr>\n                    <tr className=\"table-danger\">Join Date: {job_details.posting_date.date} {monthNames[job_details.posting_date.month]}, {job_details.posting_date.year}</tr>\n                    <tr className=\"table-danger\">Title: {job_details.title} </tr>\n                    <StarRatings rating={this.getApplicantDetails(d.applicant).rating} starRatedColor=\"blue\" changeRating={this.changeRating} numberOfStars={5} name={this.getApplicantDetails(d.applicant).usrid}/>\n                    </tbody>\n        </table>\n        );\n    };\n\n    renderApps(){\n\n        if(this.state.loading || !this.state.applications)\n        {\n            console.log(localStorage.getItem(\"type\"));\n            return (\n                <div>Loading ...</div>\n            );\n            \n        }\n\n        else if(localStorage.getItem(\"type\") === 'Recruiter' && this.state.clear_sorted == 1)\n        {\n            const apps = this.state.applications.map((d) => \n            <div> {this.renderAppDetails(d)} </div>\n            );\n            return (\n                <div>{apps}</div>\n            );\n        }\n\n        else if(localStorage.getItem(\"type\") === 'Recruiter' && this.state.clear_sorted == 0)\n        {\n\n            const apps = this.state.sorted_app.map((d) => \n            <div> {this.renderAppDetails(d)} </div>\n            );\n            return (\n                <div>{apps}</div>\n            );\n        }\n    }\n\n    render() {\n\n        return (\n            <div className=\"d-flex flex-row\">\n                <div className=\"d-flex flex-column p-4\">\n                    <div>\n                        <label>Sort by: {this.state.sortby}</label>\n                        <DropdownButton alignRight title=\"Sort by\" id=\"dropdown\" value={this.state.sortby} onSelect={this.onChangeSortBy} >\n                            <Dropdown.Item eventKey=\"Rating\">Rating</Dropdown.Item>\n                            <Dropdown.Divider />\n                            <Dropdown.Item eventKey=\"Name\">Name</Dropdown.Item>\n                            <Dropdown.Divider />\n                            <Dropdown.Item eventKey=\"Date\">Posting date</Dropdown.Item>\n                            <Dropdown.Divider />\n                            <Dropdown.Item eventKey=\"Title\">Job Title</Dropdown.Item>\n                        </DropdownButton>\n                    </div>\n                    <div>\n                        <label>Sort in: {this.state.sortin}</label>\n                        <DropdownButton alignRight title=\"Sort in\" id=\"dropdown\" value={this.state.sortin} onSelect={this.onChangeSortIn} >\n                            <Dropdown.Item eventKey=\"asc\">Ascending</Dropdown.Item>\n                            <Dropdown.Divider />\n                            <Dropdown.Item eventKey=\"des\">Descending</Dropdown.Item>\n                        </DropdownButton>\n                    </div>\n                    <div>\n                        <label>Sort by title</label>\n                    </div>\n                    <div className=\"p-2\">\n                        <Button size=\"sm\" variant=\"outline-primary\" onClick={() => this.onSort(this.state.sortby , this.state.sortin)}>Sort</Button>\n                    </div>\n                </div>\n                <div className=\"p-4 align-self-center\">{this.renderApps()}</div>\n            </div>\n        )\n    }\n\n}\n\nexport default withRouter(appViewJob);"]},"metadata":{},"sourceType":"module"}