{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/karthik/Desktop/linkedin-clone/frontend/src/components/applicationview.component.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\nimport jobaddComponent from './jobadd.component';\nimport StarRatings from 'react-star-ratings';\n\nclass viewApplication extends Component {\n  constructor(props) {\n    super(props);\n    this.componentWillMount = this.componentWillMount.bind(this);\n    this.renderUser = this.renderUser.bind(this);\n    this.getRecruiterDetails = this.getRecruiterDetails.bind(this);\n    this.getJobDetails = this.getJobDetails.bind(this);\n    this.state = {\n      applications: {},\n      jobs: {},\n      recruiters: {},\n      applicant: '',\n      loading: true,\n      users: {}\n    };\n  }\n\n  componentWillMount() {\n    const User = {\n      token: localStorage.getItem('token'),\n      type: localStorage.getItem('type')\n    };\n    const tokenVerify = {\n      token: localStorage.getItem('token')\n    };\n\n    if (User.type !== 'Applicant' || !User.token) {\n      alert('Not Permitted');\n      this.props.history.push('/login');\n    }\n\n    axios.post(\"http://localhost:5000/users/decode\", tokenVerify).then(res => {\n      if (!res.data.id) {\n        alert('Not permitted');\n        this.props.history.push('/login');\n      } else {\n        this.setState({\n          applicant: res.data.id\n        });\n        const url = \"http://localhost:5000/applicants/applications/\" + res.data.id;\n        axios.post(url, tokenVerify).then(applications => {\n          if (applications.data == 1) {\n            alert('Not Permitted');\n            this.props.history.push('login');\n          } else {\n            this.setState({\n              applications: applications.data\n            });\n            var jobsids = [];\n            const len = applications.data.length;\n\n            if (len != 0) {\n              for (var i = 0; i < len; i++) {\n                jobsids.push(applications.data[i].job);\n              }\n\n              const viewSome = {\n                token: localStorage.getItem(\"token\"),\n                jobarr: jobsids\n              };\n              axios.post(\"http://localhost:5000/jobs/viewsome\", viewSome).then(results => {\n                if (res.data == 1) {\n                  alert('Not Permitted');\n                  this.props.history.push('login');\n                } else {\n                  this.setState({\n                    jobs: results.data.jobs\n                  });\n                  this.setState({\n                    recruiters: results.data.recruiters\n                  });\n                  this.setState({\n                    users: results.data.users\n                  });\n                  this.setState({\n                    loading: false\n                  });\n                }\n              }).catch(error => console.log(error));\n            }\n          }\n        }).catch(error => console.log(error));\n      }\n    }).catch(error => console.log(error));\n  }\n\n  getUserDetails(recid) {\n    const len = this.state.users.length;\n\n    if (len != 0) {\n      for (var i = 0; i < len; i++) {\n        if (recid === this.state.users[i]._id) {\n          return this.state.users[i].name;\n        }\n      }\n    }\n  }\n\n  getRecruiterDetails(recid) {\n    const len = this.state.recruiters.length;\n\n    if (len != 0) {\n      for (var i = 0; i < len; i++) {\n        if (recid === this.state.recruiters[i].usrid) {\n          const recDetails = {\n            phone: this.state.recruiters[i].phone,\n            bio: this.state.recruiters[i].bio,\n            name: this.getUserDetails(recid)\n          };\n          console.log(recDetails);\n          return recDetails;\n        }\n      }\n    }\n  }\n\n  changeRating(newRating, name) {\n    const url = \"http://localhost:5000/jobs/updateratings/\" + name;\n    const requirements = {\n      token: localStorage.getItem('token'),\n      rating: newRating\n    };\n    axios.post(url, requirements).then(result => {\n      if (result.data == 1) {\n        alert('Not Authorized!');\n        this.props.history.push('/login');\n      } else if (result.data == 2) {\n        alert('Already Rated');\n      } else {\n        alert('Successful!');\n        window.location.reload(false);\n      }\n    });\n  }\n\n  getJobDetails(jobid) {\n    const len = this.state.jobs.length;\n\n    if (len != 0) {\n      for (var i = 0; i < len; i++) {\n        if (jobid === this.state.jobs[i]._id) {\n          const jobDetails = {\n            recruiter: this.getRecruiterDetails(this.state.jobs[i].recruiter),\n            title: this.state.jobs[i].title,\n            rating: this.state.jobs[i].rating,\n            id: this.state.jobs[i]._id,\n            posting_date: this.state.jobs[i].posting_date\n          };\n          return jobDetails;\n        }\n      }\n    }\n  }\n\n  getStatus(status) {\n    if (status == 0) return 'Submitted!';else if (status == 1) return 'Shortlisted!';else if (status == 2) return 'Accepted!';else if (status == 3) return 'Rejected :(';\n  }\n\n  renderJoinDate(d) {\n    if (d.accept != 2) {\n      return \"Not Available\";\n    } else {\n      const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n      console.log(this.getJobDetails(d.job).posting_date);\n      return this.getJobDetails(d.job).posting_date.date + \"  \" + monthNames[this.getJobDetails(d.job).posting_date.month] + \", \" + this.getJobDetails(d.job).posting_date.year;\n    }\n  }\n\n  renderUser() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading.....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this);\n    } else {\n      console.log(this.state.applications);\n      const job = this.state.applications.map(d => /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-bordered\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Phone Number of Recruiter: \", this.getJobDetails(d.job).recruiter.phone]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Name of Recruiter: \", this.getRecruiterDetails(d.recruiter).name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Recruiter Bio : \", this.getJobDetails(d.job).recruiter.bio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Title: \", this.getJobDetails(d.job).title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Your SOP: \", d.sop]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Joining date: \", this.renderJoinDate(d)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"table-danger\",\n            children: [\"Status: \", this.getStatus(d.accept)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StarRatings, {\n            rating: this.getJobDetails(d.job).rating,\n            starRatedColor: \"blue\",\n            changeRating: this.changeRating,\n            numberOfStars: 5,\n            name: this.getJobDetails(d.job).id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }, this));\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"View Applications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          children: job\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.renderUser()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default withRouter(viewApplication);","map":{"version":3,"sources":["/Users/karthik/Desktop/linkedin-clone/frontend/src/components/applicationview.component.js"],"names":["axios","React","Component","Link","Container","withRouter","jobaddComponent","StarRatings","viewApplication","constructor","props","componentWillMount","bind","renderUser","getRecruiterDetails","getJobDetails","state","applications","jobs","recruiters","applicant","loading","users","User","token","localStorage","getItem","type","tokenVerify","alert","history","push","post","then","res","data","id","setState","url","jobsids","len","length","i","job","viewSome","jobarr","results","catch","error","console","log","getUserDetails","recid","_id","name","usrid","recDetails","phone","bio","changeRating","newRating","requirements","rating","result","window","location","reload","jobid","jobDetails","recruiter","title","posting_date","getStatus","status","renderJoinDate","d","accept","monthNames","date","month","year","map","sop","render"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\nimport jobaddComponent from './jobadd.component';\nimport StarRatings from 'react-star-ratings';\n\n\nclass viewApplication extends Component {\n    constructor(props) {\n        super(props);\n        this.componentWillMount = this.componentWillMount.bind(this);\n        this.renderUser = this.renderUser.bind(this);\n        this.getRecruiterDetails = this.getRecruiterDetails.bind(this);\n        this.getJobDetails = this.getJobDetails.bind(this);\n        this.state = {\n            applications: {},\n            jobs: {},\n            recruiters: {},\n            applicant: '',\n            loading: true,\n            users: {}\n        }\n    }\n\n\n    componentWillMount() {\n\n        const User = {\n            token: localStorage.getItem('token'),\n            type: localStorage.getItem('type')\n        }\n\n        const tokenVerify = {\n            token: localStorage.getItem('token')\n        }\n\n        if(User.type !== 'Applicant' || !User.token)\n        {\n            alert('Not Permitted');\n            this.props.history.push('/login');\n        }\n\n        axios.post(\"http://localhost:5000/users/decode\" , tokenVerify)\n        .then(res => {\n            if(!res.data.id) {\n                alert('Not permitted');\n                this.props.history.push('/login');\n            }\n\n            else {\n                this.setState({applicant: res.data.id});\n                const url = \"http://localhost:5000/applicants/applications/\" + res.data.id;\n                axios.post(url , tokenVerify)\n                .then(applications => {\n                    if(applications.data == 1) {\n                        alert('Not Permitted');\n                        this.props.history.push('login');\n                    }\n                    else {\n                        this.setState({applications: applications.data});\n                        var jobsids = [];\n                        const len = applications.data.length;\n                        if(len != 0) {\n                            for(var i = 0 ; i < len ; i++)\n                            {\n                                jobsids.push(applications.data[i].job);\n                            }\n                            const viewSome = {\n                                token: localStorage.getItem(\"token\"),\n                                jobarr: jobsids\n                            }\n                            axios.post(\"http://localhost:5000/jobs/viewsome\" , viewSome)\n                            .then(results => {\n                                if(res.data == 1) {\n                                    alert('Not Permitted');\n                                    this.props.history.push('login');\n                                }\n                                else {\n                                this.setState({jobs: results.data.jobs});\n                                this.setState({recruiters: results.data.recruiters});\n                                this.setState({users: results.data.users});\n                                this.setState({loading: false});\n                                }\n                            })\n                            .catch((error) => console.log(error));\n                        } \n                    }\n                })\n                .catch((error) => console.log(error));\n            }\n        })\n        .catch((error) => console.log(error));\n    }\n\n    getUserDetails(recid){\n        const len = this.state.users.length;\n        if(len != 0)\n        {\n            for(var i = 0 ; i < len ; i++)\n            {\n                if(recid === this.state.users[i]._id)\n                {\n                    return this.state.users[i].name\n                }\n            }\n        }\n    }\n\n    getRecruiterDetails(recid) {\n        \n        const len = this.state.recruiters.length;\n        if(len != 0)\n        {\n            for(var i = 0 ; i < len ; i++)\n            {\n                if(recid === this.state.recruiters[i].usrid)\n                {\n                    const recDetails = {\n                        phone: this.state.recruiters[i].phone,\n                        bio: this.state.recruiters[i].bio,\n                        name: this.getUserDetails(recid)\n                    }\n                    console.log(recDetails);\n                    return recDetails;\n                }\n            }\n        }\n    }\n\n    changeRating( newRating, name ) {\n        const url = \"http://localhost:5000/jobs/updateratings/\" + name;\n        const requirements = {\n            token: localStorage.getItem('token'),\n            rating: newRating\n        };\n        axios.post(url , requirements)\n        .then(result => {\n            if(result.data == 1)\n            {\n                alert('Not Authorized!');\n                this.props.history.push('/login');\n            }\n            else if(result.data == 2)\n            {\n                alert('Already Rated');\n            }\n            else{\n                alert('Successful!');\n                window.location.reload(false);\n            }\n        })\n    }\n\n    getJobDetails(jobid) {\n\n        const len = this.state.jobs.length;\n        if(len != 0)\n        {\n            for(var i = 0 ; i < len ; i++)\n            {\n                if(jobid === this.state.jobs[i]._id)\n                {\n                    const jobDetails = {\n                        recruiter: this.getRecruiterDetails(this.state.jobs[i].recruiter),\n                        title: this.state.jobs[i].title,\n                        rating: this.state.jobs[i].rating,\n                        id: this.state.jobs[i]._id,\n                        posting_date: this.state.jobs[i].posting_date\n                    }\n                    return jobDetails\n                }\n            }\n        }\n\n    }\n\n    getStatus(status) {\n\n        if(status == 0)\n            return 'Submitted!';\n        else if(status == 1)\n            return 'Shortlisted!';\n        else if(status == 2)\n            return 'Accepted!';\n        else if(status == 3)\n            return 'Rejected :(';\n    }\n\n    renderJoinDate(d){\n        if(d.accept != 2)\n        {\n            return \"Not Available\";\n        }\n        else{\n            const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n            console.log(this.getJobDetails(d.job).posting_date);\n            return this.getJobDetails(d.job).posting_date.date + \"  \" + monthNames[this.getJobDetails(d.job).posting_date.month] + \", \" + this.getJobDetails(d.job).posting_date.year;\n        }\n    }\n\n    renderUser() { \n        if(this.state.loading)\n        {\n            return(\n                <div>Loading.....</div>\n            )\n        }\n        else\n        {\n            console.log(this.state.applications);\n            const job = this.state.applications.map((d) => \n            <table className=\"table table-bordered\">\n                <tbody>\n                <tr className=\"table-danger\">Phone Number of Recruiter: {this.getJobDetails(d.job).recruiter.phone}</tr>\n                <tr className=\"table-danger\">Name of Recruiter: {this.getRecruiterDetails(d.recruiter).name}</tr>\n                <tr className=\"table-danger\">Recruiter Bio : {this.getJobDetails(d.job).recruiter.bio}</tr>\n                <tr className=\"table-danger\">Title: {this.getJobDetails(d.job).title}</tr>\n                <tr className=\"table-danger\">Your SOP: {d.sop}</tr>\n                <tr className=\"table-danger\">Joining date: {this.renderJoinDate(d)}</tr>\n                <tr className=\"table-danger\">Status: {this.getStatus(d.accept)}</tr>\n                <StarRatings rating={this.getJobDetails(d.job).rating} starRatedColor=\"blue\" changeRating={this.changeRating} numberOfStars={5} name={this.getJobDetails(d.job).id}/>\n                </tbody>\n            </table>\n            );\n            return (\n                <div>\n                    <h1>View Applications</h1>\n                    <Container>{job}</Container>\n                </div>\n            );\n        }\n    }\n\n    render() {\n\n        return(\n        <div>{this.renderUser()}</div>\n        )\n    }\n\n}\nexport default withRouter(viewApplication);"]},"metadata":{},"sourceType":"module"}