{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/karthik/Desktop/linkedin-clone/frontend/src/components/apply.component.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\n\nclass Apply extends Component {\n  constructor(props) {\n    super(props);\n    this.componentWillMount = this.componentWillMount.bind(this);\n    this.onChangeSOP = this.onChangeSOP.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      jobid: '',\n      applicantid: '',\n      loading: true,\n      sop: ''\n    };\n  }\n\n  componentWillMount() {\n    const User = {\n      token: localStorage.getItem('token'),\n      type: localStorage.getItem('type')\n    };\n    const TokenVerify = {\n      token: localStorage.getItem('token')\n    };\n    const job = this.props.location.state;\n\n    if (!User.token || !job || User.type !== 'Applicant') {\n      alert('Not permitted');\n      this.props.history.push('/login');\n    }\n\n    this.setState({\n      jobid: job\n    });\n    axios.post(\"http://localhost:5000/users/decode\", TokenVerify).then(res => {\n      if (!res.data.id) {\n        alert('Not permitted');\n        this.props.history.push('/login');\n      } else {\n        this.setState({\n          applicantid: res.data.id\n        });\n      }\n    }).catch(error => console.log(error));\n  }\n\n  onChangeSOP(e) {\n    this.setState({\n      sop: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const newApplication = {\n      token: localStorage.getItem('token'),\n      sop: this.state.sop\n    };\n    const joburl = \"http://localhost:5000/jobs/\" + this.state.jobid;\n    axios.get(joburl).then(jobs => {\n      console.log(\"HEYYYYYY\");\n      const cur_date = new Date();\n      console.log(cur_date);\n      const cur_stamp = cur_date.getTime();\n      const deadline_stamp = Date.parse(jobs.data.deadline);\n\n      if (cur_stamp > deadline_stamp) {\n        alert('Deadline Passed , cant apply');\n        this.props.history.push('/dashboard');\n      }\n    }).catch(error => console.log(error));\n    const url = \"http://localhost:5000/applicants/applications/\" + this.state.applicantid + \"/\" + this.state.jobid;\n    console.log(url);\n    axios.post(url, newApplication).then(res => {\n      alert(res.data);\n      this.props.history.push('/jobview');\n    }).catch(error => console.log(error));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Enter an SOP of not more than 250 words:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"textarea\",\n            className: \"form-control\",\n            value: this.state.sop,\n            onChange: this.onChangeSOP\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Apply\",\n            className: \"btn btn-danger\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Apply);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/karthik/Desktop/linkedin-clone/frontend/src/components/apply.component.js"],"names":["axios","React","Component","Link","Container","withRouter","Apply","constructor","props","componentWillMount","bind","onChangeSOP","onSubmit","state","jobid","applicantid","loading","sop","User","token","localStorage","getItem","type","TokenVerify","job","location","alert","history","push","setState","post","then","res","data","id","catch","error","console","log","e","target","value","preventDefault","newApplication","joburl","get","jobs","cur_date","Date","cur_stamp","getTime","deadline_stamp","parse","deadline","url","render"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Container from 'react-bootstrap/Container'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { withRouter } from \"react-router-dom\";\n\nclass Apply extends Component {\n    constructor(props) {\n        super(props);\n\n        this.componentWillMount = this.componentWillMount.bind(this);\n        this.onChangeSOP = this.onChangeSOP.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.state = {\n            jobid: '',\n            applicantid: '',\n            loading: true,\n            sop: ''\n        }\n    }\n\n    componentWillMount() {\n\n        const User = {\n            token: localStorage.getItem('token'),\n            type: localStorage.getItem('type')\n        }\n\n        const TokenVerify = {\n            token: localStorage.getItem('token')\n        }\n\n        const job = this.props.location.state;\n\n        if(!User.token || !job || User.type !== 'Applicant')\n        {\n            alert('Not permitted');\n            this.props.history.push('/login');\n        }\n\n        this.setState({jobid: job});\n\n        axios.post(\"http://localhost:5000/users/decode\" , TokenVerify)\n        .then(res => {\n            if(!res.data.id) {\n                alert('Not permitted');\n                this.props.history.push('/login');\n            }\n\n            else {\n                this.setState({applicantid: res.data.id});\n            }\n        })\n        .catch((error) => console.log(error));\n    }\n\n    onChangeSOP(e) {\n        this.setState({\n            sop: e.target.value\n        });\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n\n        const newApplication = {\n            token: localStorage.getItem('token'),\n            sop: this.state.sop\n        }\n\n        const joburl = \"http://localhost:5000/jobs/\" + this.state.jobid;\n        axios.get(joburl)\n        .then(jobs => {\n            console.log(\"HEYYYYYY\");\n            const cur_date = new Date();\n            console.log(cur_date);\n            const cur_stamp = cur_date.getTime();\n            const deadline_stamp = Date.parse(jobs.data.deadline);\n            if(cur_stamp > deadline_stamp)\n            {\n                alert('Deadline Passed , cant apply');\n                this.props.history.push('/dashboard');\n            }\n\n        })\n        .catch(error => console.log(error));\n        const url = \"http://localhost:5000/applicants/applications/\" + this.state.applicantid + \"/\" + this.state.jobid;\n        console.log(url);\n        axios.post(url , newApplication)\n        .then(res => {\n            alert(res.data);\n            this.props.history.push('/jobview');   \n        })\n        .catch(error => console.log(error));\n    }\n\n    render() {\n\n        return (\n            <div>\n            <form onSubmit={this.onSubmit}>\n\n                <div className=\"form-group\">\n                    <label>Enter an SOP of not more than 250 words:</label>\n                    <input type=\"textarea\" className=\"form-control\" value={this.state.sop} onChange={this.onChangeSOP} />\n                </div>\n\n                <div className=\"form-group\">\n                    <input type=\"submit\" value=\"Apply\" className=\"btn btn-danger\" />\n                </div>\n            </form>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Apply);"]},"metadata":{},"sourceType":"module"}